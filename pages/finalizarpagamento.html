<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Sublime - Finalizar Pagamento">
  <title>Finalizar Pagamento - Sublime</title>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Allura&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- CSS -->
  <link rel="stylesheet" href="../css/finpag.css">
</head>
<body>
  
  <!-- HEADER -->
  <header class="header">
    <div class="header-content">
      <a href="/index.html" class="logo">Sublime</a>
      <a href="/index.html" class="back-btn">‚Üê Voltar</a>
    </div>
  </header>
  
  <!-- INDICADOR DE ETAPAS -->
  <section class="checkout-steps">
    <div class="steps-container">
      <div class="step active" data-step="1">
        <div class="step-number">1</div>
        <div class="step-label">Dados</div>
      </div>
      <div class="step" data-step="2">
        <div class="step-number">2</div>
        <div class="step-label">Recebimento</div>
      </div>
      <div class="step" data-step="3">
        <div class="step-number">3</div>
        <div class="step-label">Revis√£o</div>
      </div>
      <div class="step" data-step="4">
        <div class="step-number">4</div>
        <div class="step-label">Pagamento</div>
      </div>
    </div>
  </section>
  
  <!-- MAIN CONTENT -->
  <main class="main-content">
    <div class="checkout-grid">
      
      <!-- FORMUL√ÅRIO DAS ETAPAS -->
      <div class="checkout-form">
        
        <!-- ============================================
             ETAPA 1: DADOS PESSOAIS
             ============================================ -->
        <div class="step-content active" id="step-1">
          <h2>Seus Dados</h2>
          
          <div class="form-group">
            <label for="customer-name">Nome Completo *</label>
            <input type="text" id="customer-name" required>
            <span class="error-message" id="error-name"></span>
          </div>
          
          <div class="form-group">
            <label for="customer-phone">Telefone *</label>
            <input type="tel" id="customer-phone" placeholder="(00) 00000-0000" required>
            <span class="error-message" id="error-phone"></span>
          </div>
          
          
          
          <div class="action-buttons">
            <button class="btn btn-primary" onclick="nextStep()">Avan√ßar</button>
          </div>
        </div>
        
        <!-- ============================================
             ETAPA 2: RECEBIMENTO
             ============================================ -->
        <div class="step-content" id="step-2" style="display: none;">
          <h2>Como deseja receber?</h2>
          
          <div class="delivery-options">
            <div class="delivery-option" data-type="retirada" onclick="selectDeliveryType('retirada')">
              <div class="delivery-option-header">
                <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
                <h3>Retirada</h3>
              </div>
              <p>Buscar no local</p>
            </div>
            
            <div class="delivery-option" data-type="entrega" onclick="selectDeliveryType('entrega')">
              <div class="delivery-option-header">
                <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/>
                </svg>
                <h3>Entrega</h3>
              </div>
              <p>Receber em casa</p>
            </div>
          </div>
          
          <!-- CAMPOS DE RETIRADA -->
          <div id="pickup-fields" style="display: none;">
            <div class="info-box">
              <strong>üìç Endere√ßo de Retirada:</strong><br>
              Rua Itacy Rodovalho de Alencar, 110 - Veneza<br>
              Pr√≥ximo √† Academia DM Fit - CEP: 63504-460
            </div>
            
            <div class="form-group">
              <label for="pickup-who">Quem vai retirar? *</label>
              <input type="text" id="pickup-who" placeholder="Nome da pessoa">
              <span class="error-message" id="error-pickup-who"></span>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="pickup-date">Data da Retirada *</label>
                <input type="date" id="pickup-date">
                <span class="error-message" id="error-pickup-date"></span>
              </div>
              
              <div class="form-group">
                <label for="pickup-time">Hor√°rio *</label>
                <select id="pickup-time">
                  <option value="">Selecione</option>
                  <option value="08:00">08:00</option>
                  <option value="08:30">08:30</option>
                  <option value="09:00">09:00</option>
                  <option value="09:30">09:30</option>
                  <option value="10:00">10:00</option>
                  <option value="10:30">10:30</option>
                  <option value="11:00">11:00</option>
                  <option value="11:30">11:30</option>
                  <option value="12:00">12:00</option>
                  <option value="12:30">12:30</option>
                  <option value="13:00">13:00</option>
                  <option value="13:30">13:30</option>
                  <option value="14:00">14:00</option>
                  <option value="14:30">14:30</option>
                  <option value="15:00">15:00</option>
                  <option value="15:30">15:30</option>
                  <option value="16:00">16:00</option>
                  <option value="16:30">16:30</option>
                  <option value="17:00">17:00</option>
                  <option value="17:30">17:30</option>
                  <option value="18:00">18:00</option>
                  <option value="18:30">18:30</option>
                  <option value="19:00">19:00</option>
                </select>
                <span class="error-message" id="error-pickup-time"></span>
              </div>
            </div>
            
            <div class="warning-box">
              ‚ö†Ô∏è <strong>Aten√ß√£o:</strong> Se n√£o houver atendente dispon√≠vel no hor√°rio marcado, a responsabilidade √© do cliente. Para remarcar, entre em contato com a vendedora.
            </div>
          </div>
          
          <!-- CAMPOS DE ENTREGA -->
          <div id="delivery-fields" style="display: none;">
            <div class="info-box">
              <strong>üì¶ Origem:</strong> Rua Itacy Rodovalho de Alencar, 110 - CEP: 63504-460
            </div>
            
            <div class="form-group">
              <label for="delivery-cep">CEP *</label>
              <input type="text" id="delivery-cep" placeholder="00000-000" maxlength="9">
              <button type="button" class="btn-inline" onclick="searchCEP()">Buscar CEP</button>
              <span class="error-message" id="error-cep"></span>
            </div>
            
            <div class="form-group">
              <label for="delivery-street">Rua *</label>
              <input type="text" id="delivery-street" required>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="delivery-number">N√∫mero *</label>
                <input type="text" id="delivery-number" required>
              </div>
              
              <div class="form-group">
                <label for="delivery-complement">Complemento</label>
                <input type="text" id="delivery-complement">
              </div>
            </div>
            
            <div class="form-group">
              <label for="delivery-neighborhood">Bairro *</label>
              <input type="text" id="delivery-neighborhood" required>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="delivery-city">Cidade *</label>
                <input type="text" id="delivery-city" required>
              </div>
              
              <div class="form-group">
                <label for="delivery-state">Estado *</label>
                <select id="delivery-state" required>
                  <option value="">Selecione</option>
                  <option value="CE">CE</option>
                  <option value="AC">AC</option>
                  <option value="AL">AL</option>
                  <option value="AP">AP</option>
                  <option value="AM">AM</option>
                  <option value="BA">BA</option>
                  <option value="DF">DF</option>
                  <option value="ES">ES</option>
                  <option value="GO">GO</option>
                  <option value="MA">MA</option>
                  <option value="MT">MT</option>
                  <option value="MS">MS</option>
                  <option value="MG">MG</option>
                  <option value="PA">PA</option>
                  <option value="PB">PB</option>
                  <option value="PR">PR</option>
                  <option value="PE">PE</option>
                  <option value="PI">PI</option>
                  <option value="RJ">RJ</option>
                  <option value="RN">RN</option>
                  <option value="RS">RS</option>
                  <option value="RO">RO</option>
                  <option value="RR">RR</option>
                  <option value="SC">SC</option>
                  <option value="SP">SP</option>
                  <option value="SE">SE</option>
                  <option value="TO">TO</option>
                </select>
              </div>
            </div>
            
            <button type="button" class="btn btn-secondary" onclick="calculateShipping()">Calcular Frete</button>
            
            <div id="shipping-result" style="display: none;">
              <div class="success-box">
                <strong>‚úì Frete Calculado</strong><br>
                Valor: <strong>R$ <span id="shipping-value">0.00</span></strong>
                <p id="shipping-note" class="small-text"></p>
              </div>
            </div>
          </div>
          
          <div class="action-buttons">
            <button class="btn btn-secondary" onclick="prevStep()">Voltar</button>
            <button class="btn btn-primary" onclick="nextStep()">Avan√ßar</button>
          </div>
        </div>

        <!-- ============================================
             ETAPA 3: REVIS√ÉO
             ============================================ -->
        <div class="step-content" id="step-3" style="display: none;">
          <h2>Conferir Venda</h2>
          
          <div class="review-section">
            <h3>üì¶ Produtos</h3>
            <div id="review-items"></div>
          </div>
          
          <div class="review-section">
            <h3>üöö Recebimento</h3>
            <div id="review-delivery"></div>
          </div>
          
          <div class="review-section">
            <h3>üí∞ Valores</h3>
            <div class="review-totals">
              <div class="review-row">
                <span>Subtotal:</span>
                <span id="review-subtotal">R$ 0,00</span>
              </div>
              <div class="review-row">
                <span>Frete:</span>
                <span id="review-shipping">R$ 0,00</span>
              </div>
              <div class="review-row">
                <span>Desconto (cupom):</span>
                <span id="review-discount">R$ 0,00</span>
              </div>
              <div class="review-row total">
                <span><strong>Total:</strong></span>
                <span id="review-total"><strong>R$ 0,00</strong></span>
              </div>
            </div>
          </div>
          
          <div class="action-buttons">
            <button class="btn btn-secondary" onclick="prevStep()">Voltar</button>
            <button class="btn btn-primary" onclick="nextStep()">Avan√ßar para Pagamento</button>
          </div>
        </div>
        
        <!-- ============================================
             ETAPA 4: PAGAMENTO
             ============================================ -->
        <div class="step-content" id="step-4" style="display: none;">
          <h2>Forma de Pagamento</h2>
          
          <div class="payment-methods">
            <div class="payment-method" data-method="PIX" onclick="selectPaymentMethod('PIX')">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 50 50" fill="currentColor">
                <path d="M 25 0.0390625 C 22.84 0.0390625 20.799531 0.88015625 19.269531 2.4101562 L 9.6796875 12 L 12.929688 12 C 14.529687 12 16.039922 12.619766 17.169922 13.759766 L 23.939453 20.529297 C 24.519453 21.109297 25.480547 21.109531 26.060547 20.519531 L 32.830078 13.759766 C 33.960078 12.619766 35.470312 12 37.070312 12 L 40.320312 12 L 30.730469 2.4101562 C 29.200469 0.88015625 27.16 0.0390625 25 0.0390625 z M 7.6796875 14 L 2.4101562 19.269531 C -0.74984375 22.429531 -0.74984375 27.570469 2.4101562 30.730469 L 7.6796875 36 L 12.929688 36 C 13.999687 36 14.999766 35.580078 15.759766 34.830078 L 22.529297 28.060547 C 23.889297 26.700547 26.110703 26.700547 27.470703 28.060547 L 34.240234 34.830078 C 35.000234 35.580078 36.000312 36 37.070312 36 L 42.320312 36 L 47.589844 30.730469 C 50.749844 27.570469 50.749844 22.429531 47.589844 19.269531 L 42.320312 14 L 37.070312 14 C 36.000313 14 35.000234 14.419922 34.240234 15.169922 L 27.470703 21.939453 C 26.790703 22.619453 25.9 22.960938 25 22.960938 C 24.1 22.960937 23.209297 22.619453 22.529297 21.939453 L 15.759766 15.169922 C 14.999766 14.419922 13.999688 14 12.929688 14 L 7.6796875 14 z M 25 29.037109 C 24.615 29.038359 24.229453 29.185469 23.939453 29.480469 L 17.169922 36.240234 C 16.039922 37.380234 14.529687 38 12.929688 38 L 9.6796875 38 L 19.269531 47.589844 C 20.799531 49.119844 22.84 49.960938 25 49.960938 C 27.16 49.960938 29.200469 49.119844 30.730469 47.589844 L 40.320312 38 L 37.070312 38 C 35.470313 38 33.960078 37.380234 32.830078 36.240234 L 26.060547 29.470703 C 25.770547 29.180703 25.385 29.035859 25 29.037109 z"></path>
              </svg>
              <h3>PIX</h3>
              <p>Aprova√ß√£o imediata</p>
            </div>
            

            
            <div class="payment-method" data-method="Dinheiro" onclick="selectPaymentMethod('Dinheiro')">
              <svg width="32" height="32" fill="currentColor" viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="40" cy="40" r="36" /> <circle cx="40" cy="40" r="30"/> <text x="40" y="52" text-anchor="middle" font-size="38" font-weight="700" fill="#fff" font-family="Arial, Helvetica, sans-serif">$</text></svg>
              <h3>Dinheiro</h3>
              <p>Pagar na entrega/retirada</p>
            </div>
            
            <div class="payment-method" data-method="Credito" onclick="selectPaymentMethod('Credito')">
              <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/>
              </svg>
              <h3>Cart√£o de Cr√©dito</h3>
              <p>Parcelamento dispon√≠vel</p>
            </div>
          </div>
          
          <!-- DETALHES DO M√âTODO SELECIONADO -->
          <div id="payment-details">
            <!-- PIX -->
            <div class="payment-info" id="info-PIX" style="display: none;">
              <p>‚úÖ Ap√≥s confirmar o pedido, voc√™ receber√° as instru√ß√µes para pagamento via PIX.</p>
            </div>
            
            <!-- Dinheiro -->
            <div class="payment-info" id="info-Dinheiro" style="display: none;">
              <p>üíµ O pagamento ser√° realizado na entrega ou retirada do produto.</p>
              <div class="form-group">
                <label for="change-for">Troco para quanto? (opcional)</label>
                <input type="number" id="change-for" min=0 placeholder="R$ 100,00">
              </div>
            </div>
            
            <!-- Cr√©dito -->
            <div class="payment-info" id="info-Credito" style="display: none;">
              <div class="form-group">
                <label for="installments">N√∫mero de Parcelas *</label>
                <select id="installments" onchange="updateInstallments()">
                  <option value="1">1x - R$ 0,00</option>
                  <option value="2">2x - R$ 0,00</option>
                  <option value="3">3x - R$ 0,00</option>
                  <option value="4">4x - R$ 0,00</option>
                  <option value="5">5x - R$ 0,00</option>
                  <option value="6">6x - R$ 0,00</option>
                  <option value="7">7x - R$ 0,00</option>
                  <option value="8">8x - R$ 0,00</option>
                  <option value="9">9x - R$ 0,00</option>
                  <option value="10">10x - R$ 0,00</option>
                  <option value="11">11x - R$ 0,00</option>
                  <option value="12">12x - R$ 0,00</option>
                </select>
              </div>
              
              <div class="installment-summary">
                <div class="summary-row">
                  <span>Valor sem juros:</span>
                  <span id="value-no-fee">R$ 0,00</span>
                </div>
                <div class="summary-row highlight">
                  <span><strong>Valor total com juros:</strong></span>
                  <span id="value-with-fee"><strong>R$ 0,00</strong></span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="action-buttons">
            <button class="btn btn-secondary" onclick="prevStep()">Voltar</button>
            <button class="btn btn-primary btn-finish" onclick="finishOrder()">
              <span id="btn-finish-text">Reservar Pedido</span>
              <span id="btn-finish-spinner" class="btn-spinner" style="display: none;"></span>
            </button>
          </div>
        </div>
        
      </div>
      
      <!-- RESUMO DO PEDIDO (LATERAL) -->
      <div class="order-summary">
        <h2>Resumo do Pedido</h2>
        
        <div id="summary-items"></div>
        
        <!-- CUPOM -->
        <div class="coupon-section">
          <div class="coupon-input-group">
            <input type="text" id="coupon-input" placeholder="C√≥digo do cupom" style="text-transform: uppercase;">
            <button onclick="applyCoupon()">Aplicar</button>
          </div>
          <div id="coupon-message" class="coupon-message" style="display: none;"></div>
        </div>
        
        <!-- TOTAIS -->
        <div class="summary-totals">
          <div class="summary-row">
            <span>Subtotal:</span>
            <span id="summary-subtotal">R$ 0,00</span>
          </div>
          
          <div class="summary-row">
            <span>Frete:</span>
            <span id="summary-shipping">Calcular</span>
          </div>
          
          <div class="summary-row">
            <span>Desconto:</span>
            <span id="summary-discount">R$ 0,00</span>
          </div>
          
          <div class="summary-row total">
            <span><strong>Total:</strong></span>
            <span id="summary-total"><strong>R$ 0,00</strong></span>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>Contato</h3>
        <p>Email: contato@sublime.com</p>
        <p>Telefone: (88) 00000-0000</p>
      </div>
      
      <div class="footer-section">
        <h3>Sobre</h3>
        <p>A Sublime oferece produtos Tupperware de alta qualidade.</p>
      </div>
      
      <div class="footer-section">
        <h3>Links √öteis</h3>
        <a href="checharpedido.html">Rastrear Pedido</a>
        <a href="/index.html">Voltar √†s Compras</a>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>Todos os direitos reservados ¬© Gabriel Oliveira - 2024</p>
    </div>
  </footer>
  
  <!-- LOADING OVERLAY -->
  <div class="loading-overlay" id="loading-overlay">
    <div class="spinner"></div>
    <p id="loading-text">Processando...</p>
  </div>
  
  <!-- TOAST CONTAINER -->
  <div class="toast-container" id="toast-container"></div>
  
  <!-- JavaScript -->
  <script src="../js/pag.js"></script>
</body>
</html>
