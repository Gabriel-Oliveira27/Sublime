<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Sublime - O melhor distribuidor de tupperware da região. Ofertas imperdíveis com frete grátis.">
  <title>Sublime - E-commerce de Tupperware</title>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Allura&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* ============================================
       CSS VARIABLES & THEME
       ============================================ */
    :root {
      --pink: #ff6fb5;
      --lilac: #c7aefc;
      --white: #ffffff;
      --muted: #f6f3f8;
      --dark-blue: #0b2340;
      --text: #222;
      --shadow: rgba(0, 0, 0, 0.1);
      --overlay: rgba(0, 0, 0, 0.5);
      
      /* Theme-specific */
      --bg-primary: var(--white);
      --bg-secondary: var(--muted);
      --text-primary: var(--text);
      --text-secondary: #666;
      --accent: var(--pink);
      --accent-secondary: var(--lilac);
      --border: #e0e0e0;
      --card-bg: var(--white);
    }
    
    body.dark-theme {
      --bg-primary: var(--dark-blue);
      --bg-secondary: #0a1d33;
      --text-primary: #f0f0f0;
      --text-secondary: #b0b0b0;
      --accent: var(--lilac);
      --accent-secondary: var(--pink);
      --border: #1a3a5c;
      --card-bg: #132942;
      --shadow: rgba(0, 0, 0, 0.3);
    }
    
    /* ============================================
       RESET & BASE STYLES
       ============================================ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html {
      scroll-behavior: smooth;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      transition: background 0.3s ease, color 0.3s ease;
    }
    
    button {
      font-family: inherit;
      cursor: pointer;
      border: none;
      background: none;
    }
    
    img {
      max-width: 100%;
      height: auto;
      display: block;
    }
    
    a {
      color: inherit;
      text-decoration: none;
    }
    
    input, select, textarea {
      font-family: inherit;
      font-size: 1rem;
    }
    
    /* Focus styles for accessibility */
    *:focus-visible {
      outline: 3px solid var(--accent);
      outline-offset: 2px;
    }
    
    /* ============================================
       LOADING SCREEN
       ============================================ */
    #loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-primary);
      z-index: 10000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }
    
    #loading-screen.hidden {
      opacity: 0;
      visibility: hidden;
    }
    
    .loading-logo {
      font-family: 'Allura', cursive;
      font-size: 4rem;
      color: var(--accent);
      margin-bottom: 2rem;
      animation: pulse 2s ease-in-out infinite;
    }
    
    .loading-text {
      font-size: 1.2rem;
      color: var(--text-secondary);
      margin-bottom: 2rem;
    }
    
    .spinner {
      width: 50px;
      height: 50px;
      border: 4px solid var(--border);
      border-top: 4px solid var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.05); }
    }
    
    /* ============================================
       HEADER / NAVBAR
       ============================================ */
    #header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--bg-primary);
      box-shadow: 0 2px 10px var(--shadow);
      z-index: 1000;
      transition: background 0.3s ease;
    }
    
    .header-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }
    
    .header-left {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    #menu-toggle {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.5rem;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    #logo {
      font-family: 'Allura', cursive;
      font-size: 2.5rem;
      color: var(--accent);
      text-decoration: none;
      transition: transform 0.3s ease;
    }
    
    #logo:hover {
      transform: scale(1.05);
    }
    
    .header-center {
      flex: 1;
      max-width: 500px;
      display: none;
    }
    
    .search-box {
      position: relative;
      width: 100%;
    }
    
    .search-box input {
      width: 100%;
      padding: 0.75rem 3rem 0.75rem 1rem;
      border: 2px solid var(--border);
      border-radius: 50px;
      background: var(--bg-secondary);
      color: var(--text-primary);
      transition: border-color 0.3s ease;
    }
    
    .search-box input:focus {
      border-color: var(--accent);
    }
    
    .search-box button {
      position: absolute;
      right: 0.5rem;
      top: 50%;
      transform: translateY(-50%);
      background: var(--accent);
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s ease;
    }
    
    .search-box button:hover {
      background: var(--accent-secondary);
    }
    
    .header-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .header-icon-btn {
      position: relative;
      padding: 0.5rem;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: color 0.3s ease;
    }
    
    .header-icon-btn:hover {
      color: var(--accent);
    }
    
    .cart-badge {
      position: absolute;
      top: 0;
      right: 0;
      background: var(--accent);
      color: white;
      font-size: 0.75rem;
      font-weight: 600;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: badge-pop 0.3s ease;
    }
    
    @keyframes badge-pop {
      0% { transform: scale(0); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    
    /* Mobile search button */
    #mobile-search-toggle {
      display: flex;
    }
    
    @media (min-width: 768px) {
      .header-center {
        display: block;
      }
      
      #mobile-search-toggle {
        display: none;
      }
    }
    
    /* ============================================
       SIDE MENU
       ============================================ */
    #side-menu {
      position: fixed;
      top: 0;
      left: -100%;
      width: 300px;
      height: 100vh;
      background: var(--card-bg);
      box-shadow: 2px 0 10px var(--shadow);
      z-index: 2000;
      transition: left 0.3s ease;
      overflow-y: auto;
    }
    
    #side-menu.open {
      left: 0;
    }
    
    .menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--overlay);
      z-index: 1999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    
    .menu-overlay.visible {
      opacity: 1;
      visibility: visible;
    }
    
    .menu-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .menu-header h2 {
      font-size: 1.5rem;
      color: var(--accent);
    }
    
    .menu-close {
      padding: 0.5rem;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .menu-list {
      list-style: none;
      padding: 1rem 0;
    }
    
    .menu-item {
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      cursor: pointer;
      transition: background 0.3s ease;
      border-left: 3px solid transparent;
    }
    
    .menu-item:hover {
      background: var(--bg-secondary);
      border-left-color: var(--accent);
    }
    
    .menu-item svg {
      width: 24px;
      height: 24px;
      flex-shrink: 0;
    }
    
    .menu-item span {
      flex: 1;
    }
    
    /* ============================================
       MAIN CONTENT
       ============================================ */
    main {
      margin-top: 80px;
      min-height: calc(100vh - 80px);
    }
    
    /* ============================================
       CAROUSEL
       ============================================ */
    #carousel {
      position: relative;
      max-width: 1400px;
      margin: 2rem auto;
      overflow: hidden;
      border-radius: 12px;
      box-shadow: 0 4px 20px var(--shadow);
    }
    
    .carousel-inner {
      display: flex;
      transition: transform 0.5s ease;
    }
    
    .carousel-slide {
      min-width: 100%;
      position: relative;
    }
    
    .carousel-slide img {
      width: 100%;
      height: 400px;
      object-fit: cover;
    }
    
    .carousel-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
      color: white;
      padding: 2rem;
      text-align: center;
      font-size: 1.5rem;
      font-weight: 600;
    }
    
    .carousel-controls {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      transform: translateY(-50%);
      display: flex;
      justify-content: space-between;
      padding: 0 1rem;
      pointer-events: none;
    }
    
    .carousel-btn {
      background: rgba(255, 255, 255, 0.9);
      color: var(--text);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: all;
      transition: background 0.3s ease;
    }
    
    .carousel-btn:hover {
      background: var(--accent);
      color: white;
    }
    
    .carousel-indicators {
      position: absolute;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 0.5rem;
    }
    
    .carousel-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      border: none;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.3s ease;
    }
    
    .carousel-indicator.active {
      background: white;
      transform: scale(1.3);
    }
    
    @media (max-width: 768px) {
      .carousel-slide img {
        height: 250px;
      }
      
      .carousel-caption {
        font-size: 1.2rem;
        padding: 1rem;
      }
      
      .carousel-btn {
        width: 40px;
        height: 40px;
      }
    }
    
    /* ============================================
       PAYMENT METHODS SECTION
       ============================================ */
    .payment-methods {
      max-width: 1400px;
      margin: 3rem auto;
      padding: 0 1.5rem;
    }
    
    .section-title {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 2rem;
      color: var(--text-primary);
    }
    
    .payment-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }
    
    .payment-card {
      background: var(--card-bg);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .payment-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px var(--shadow);
    }
    
    .payment-card svg {
      width: 60px;
      height: 60px;
      margin-bottom: 1rem;
      color: var(--accent);
    }
    
    .payment-card h3 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }
    
    .payment-card p {
      color: var(--text-secondary);
      font-size: 0.95rem;
    }
    
    .payment-card small {
      display: block;
      margin-top: 0.5rem;
      font-size: 0.85rem;
      color: var(--accent);
      font-style: italic;
    }
    
    /* ============================================
       PRODUCTS SECTION
       ============================================ */
    .products-section {
      max-width: 1400px;
      margin: 3rem auto;
      padding: 0 1.5rem;
    }
    
    .products-header {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 2rem;
    }
    
    .products-search {
      flex: 1;
      min-width: 250px;
    }
    
    .products-search input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid var(--border);
      border-radius: 8px;
      background: var(--bg-secondary);
      color: var(--text-primary);
    }
    
    .products-sort {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .products-sort select {
      padding: 0.75rem 1rem;
      border: 2px solid var(--border);
      border-radius: 8px;
      background: var(--bg-secondary);
      color: var(--text-primary);
      cursor: pointer;
    }
    
    .filters-toggle-btn {
      background: var(--accent);
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
      transition: background 0.3s ease;
    }
    
    .filters-toggle-btn:hover {
      background: var(--accent-secondary);
    }
    
    .products-container {
      display: flex;
      gap: 2rem;
    }
    
    /* Filters Panel */
    #filters-panel {
      width: 280px;
      background: var(--card-bg);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      height: fit-content;
      position: sticky;
      top: 100px;
    }
    
    #filters-panel.mobile-hidden {
      display: none;
    }
    
    .filter-group {
      margin-bottom: 2rem;
    }
    
    .filter-group h3 {
      font-size: 1.1rem;
      margin-bottom: 1rem;
      color: var(--text-primary);
    }
    
    .filter-group label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      cursor: pointer;
      color: var(--text-primary);
    }
    
    .filter-group input[type="checkbox"],
    .filter-group input[type="radio"] {
      cursor: pointer;
    }
    
    .filter-group select,
    .filter-group input[type="number"] {
      width: 100%;
      padding: 0.5rem;
      border: 2px solid var(--border);
      border-radius: 8px;
      background: var(--bg-secondary);
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }
    
    .price-range-inputs {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }
    
    .price-range-inputs input {
      width: 100px;
    }
    
    .filter-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .filter-actions button {
      flex: 1;
      padding: 0.75rem;
      border-radius: 8px;
      font-weight: 600;
      transition: background 0.3s ease;
    }
    
    .btn-apply-filters {
      background: var(--accent);
      color: white;
    }
    
    .btn-apply-filters:hover {
      background: var(--accent-secondary);
    }
    
    .btn-clear-filters {
      background: var(--bg-secondary);
      color: var(--text-primary);
      border: 2px solid var(--border);
    }
    
    .btn-clear-filters:hover {
      background: var(--border);
    }
    
    /* Products Grid */
    #products-grid {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }
    
    @media (min-width: 768px) {
      #products-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    @media (min-width: 1200px) {
      #products-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    @media (max-width: 768px) {
      .products-container {
        flex-direction: column;
      }
      
      #filters-panel {
        width: 100%;
        position: static;
      }
    }
    
    /* Product Card */
    .product-card {
      background: var(--card-bg);
      border: 2px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
    }
    
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px var(--shadow);
    }
    
    .product-img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      background: var(--bg-secondary);
    }
    
    .product-content {
      padding: 1rem;
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    
    .product-title {
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      color: var(--text-primary);
    }
    
    .product-desc {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 0.5rem;
      flex: 1;
    }
    
    .product-line {
      font-size: 0.85rem;
      color: var(--accent);
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    
    .product-stock {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 1rem;
    }
    
    .product-stock.last-unit {
      color: var(--accent);
      font-weight: 600;
      animation: pulse 2s ease-in-out infinite;
    }
    
    .price {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      margin-bottom: 1rem;
    }
    
    .price-original {
      font-size: 0.9rem;
      color: var(--text-secondary);
      text-decoration: line-through;
    }
    
    .price-current {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
    }
    
    .add-to-cart {
      width: 100%;
      padding: 0.75rem;
      background: var(--accent);
      color: white;
      border-radius: 8px;
      font-weight: 600;
      transition: background 0.3s ease, transform 0.2s ease;
    }
    
    .add-to-cart:hover {
      background: var(--accent-secondary);
      transform: scale(1.02);
    }
    
    .add-to-cart:active {
      transform: scale(0.98);
    }
    
    /* ============================================
       MODALS
       ============================================ */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--overlay);
      z-index: 3000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      padding: 1rem;
    }
    
    .modal.open {
      opacity: 1;
      visibility: visible;
    }
    
    .modal-content {
      background: var(--card-bg);
      border-radius: 16px;
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.3);
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }
    
    .modal.open .modal-content {
      transform: scale(1);
    }
    
    .modal-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .modal-header h2 {
      font-size: 1.5rem;
      color: var(--text-primary);
    }
    
    .modal-close {
      padding: 0.5rem;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: color 0.3s ease;
    }
    
    .modal-close:hover {
      color: var(--accent);
    }
    
    .modal-body {
      padding: 1.5rem;
    }
    
    .modal-footer {
      padding: 1.5rem;
      border-top: 1px solid var(--border);
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }
    
    /* Form Elements in Modals */
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid var(--border);
      border-radius: 8px;
      background: var(--bg-secondary);
      color: var(--text-primary);
    }
    
    .form-group small {
      display: block;
      margin-top: 0.25rem;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    
    /* Buttons */
    .btn {
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease;
    }
    
    .btn-primary {
      background: var(--accent);
      color: white;
    }
    
    .btn-primary:hover {
      background: var(--accent-secondary);
    }
    
    .btn-secondary {
      background: var(--bg-secondary);
      color: var(--text-primary);
      border: 2px solid var(--border);
    }
    
    .btn-secondary:hover {
      background: var(--border);
    }
    
    .btn:active {
      transform: scale(0.98);
    }
    
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    /* Frete Result */
    .frete-result {
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      margin-top: 1rem;
    }
    
    .frete-result h3 {
      color: var(--accent);
      margin-bottom: 0.5rem;
    }
    
    .frete-result p {
      color: var(--text-primary);
    }
    
    /* ============================================
       CART OFFCANVAS
       ============================================ */
    #cart-offcanvas {
      position: fixed;
      top: 0;
      right: -100%;
      width: 100%;
      max-width: 450px;
      height: 100vh;
      background: var(--card-bg);
      box-shadow: -2px 0 10px var(--shadow);
      z-index: 3001;
      transition: right 0.3s ease;
      display: flex;
      flex-direction: column;
    }
    
    #cart-offcanvas.open {
      right: 0;
    }
    
    .cart-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .cart-header h2 {
      font-size: 1.5rem;
      color: var(--text-primary);
    }
    
    .cart-body {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
    }
    
    .cart-empty {
      text-align: center;
      padding: 3rem 1rem;
      color: var(--text-secondary);
    }
    
    .cart-empty svg {
      width: 80px;
      height: 80px;
      margin: 0 auto 1rem;
      opacity: 0.3;
    }
    
    .cart-item {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border);
    }
    
    .cart-item-img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 8px;
      background: var(--bg-secondary);
    }
    
    .cart-item-details {
      flex: 1;
    }
    
    .cart-item-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
      color: var(--text-primary);
    }
    
    .cart-item-price {
      color: var(--accent);
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    
    .cart-item-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .qty-btn {
      width: 30px;
      height: 30px;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-primary);
      font-weight: 600;
    }
    
    .qty-btn:hover {
      background: var(--accent);
      color: white;
    }
    
    .cart-item-qty {
      font-weight: 600;
      min-width: 30px;
      text-align: center;
      color: var(--text-primary);
    }
    
    .cart-item-remove {
      margin-left: auto;
      color: var(--text-secondary);
      padding: 0.5rem;
    }
    
    .cart-item-remove:hover {
      color: var(--accent);
    }
    
    .cart-footer {
      padding: 1.5rem;
      border-top: 1px solid var(--border);
      background: var(--bg-secondary);
    }
    
    .cart-summary {
      margin-bottom: 1rem;
    }
    
    .cart-summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      color: var(--text-primary);
    }
    
    .cart-summary-row.total {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
      padding-top: 0.5rem;
      border-top: 2px solid var(--border);
    }
    
    .cart-actions {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .btn-checkout {
      width: 100%;
      padding: 1rem;
      background: var(--accent);
      color: white;
      border-radius: 8px;
      font-weight: 700;
      font-size: 1.1rem;
      transition: background 0.3s ease;
    }
    
    .btn-checkout:hover {
      background: var(--accent-secondary);
    }
    
    /* ============================================
       CHECKOUT MODAL
       ============================================ */
    .checkout-step {
      display: none;
    }
    
    .checkout-step.active {
      display: block;
    }
    
    .payment-options {
      display: grid;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    .payment-option {
      border: 2px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      cursor: pointer;
      transition: border-color 0.3s ease, background 0.3s ease;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .payment-option:hover {
      border-color: var(--accent);
      background: var(--bg-secondary);
    }
    
    .payment-option.selected {
      border-color: var(--accent);
      background: var(--bg-secondary);
    }
    
    .payment-option input[type="radio"] {
      display: none;
    }
    
    .payment-option-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent);
    }
    
    .payment-option-content h4 {
      margin-bottom: 0.25rem;
      color: var(--text-primary);
    }
    
    .payment-option-content p {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    
    .installments-select {
      margin-top: 1rem;
      display: none;
    }
    
    .installments-select.visible {
      display: block;
    }
    
    .order-summary {
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    
    .order-summary h3 {
      margin-bottom: 1rem;
      color: var(--text-primary);
    }
    
    .order-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
      color: var(--text-primary);
    }
    
    .order-total {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 2px solid var(--border);
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--accent);
    }
    
    .coupon-input-group {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    
    .coupon-input-group input {
      flex: 1;
    }
    
    .status-message {
      background: var(--bg-secondary);
      border-left: 4px solid var(--accent);
      padding: 1rem;
      border-radius: 4px;
      margin-bottom: 1rem;
    }
    
    .status-message.success {
      border-left-color: #4caf50;
      background: rgba(76, 175, 80, 0.1);
    }
    
    .status-message.error {
      border-left-color: #f44336;
      background: rgba(244, 67, 54, 0.1);
    }
    
    .status-message.loading {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .status-message .spinner {
      width: 30px;
      height: 30px;
    }
    
    /* ============================================
       FOOTER
       ============================================ */
    footer {
      background: var(--bg-secondary);
      border-top: 1px solid var(--border);
      padding: 2rem 1.5rem;
      margin-top: 4rem;
    }
    
    .footer-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      text-align: center;
    }
    
    .footer-logo {
      font-family: 'Allura', cursive;
      font-size: 3rem;
      color: var(--accent);
    }
    
    .footer-social {
      display: flex;
      gap: 1rem;
    }
    
    .footer-social a {
      width: 50px;
      height: 50px;
      background: var(--card-bg);
      border: 2px solid var(--border);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-primary);
      transition: background 0.3s ease, color 0.3s ease, transform 0.3s ease;
    }
    
    .footer-social a:hover {
      background: var(--accent);
      color: white;
      transform: scale(1.1);
    }
    
    .footer-text {
      color: var(--text-secondary);
      font-size: 0.95rem;
    }
    
    /* ============================================
       UTILITY CLASSES
       ============================================ */
    .hidden {
      display: none !important;
    }
    
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }
    
    /* ============================================
       RESPONSIVE UTILITIES
       ============================================ */
    @media (max-width: 768px) {
      .modal-content {
        max-width: 100%;
        border-radius: 16px 16px 0 0;
      }
      
      .section-title {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  
  <!-- ============================================
       LOADING SCREEN
       ============================================ -->
  <div id="loading-screen" role="alert" aria-live="assertive">
    <div class="loading-logo">Sublime</div>
    <div class="loading-text">Carregando Sublime…</div>
    <div class="spinner"></div>
  </div>
  
  <!-- ============================================
       HEADER / NAVBAR
       ============================================ -->
  <header id="header" role="banner">
    <div class="header-container">
      <div class="header-left">
        <button id="menu-toggle" aria-label="Abrir menu" aria-expanded="false" aria-controls="side-menu">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
        <a href="#" id="logo" aria-label="Sublime - Página inicial">Sublime</a>
      </div>
      
      <div class="header-center">
        <div class="search-box" role="search">
          <input type="search" id="header-search" placeholder="Buscar produtos..." aria-label="Buscar produtos">
          <button type="button" onclick="performSearch()" aria-label="Buscar">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
          </button>
        </div>
      </div>
      
      <div class="header-right">
        <button id="mobile-search-toggle" class="header-icon-btn" aria-label="Buscar produtos">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </button>
        
        <button id="cart-toggle" class="header-icon-btn" aria-label="Abrir carrinho" aria-expanded="false">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
          </svg>
          <span id="cart-count" class="cart-badge hidden">0</span>
        </button>
      </div>
    </div>
  </header>
  
  <!-- ============================================
       SIDE MENU
       ============================================ -->
  <div class="menu-overlay" id="menu-overlay" aria-hidden="true"></div>
  
  <nav id="side-menu" role="navigation" aria-label="Menu principal">
    <div class="menu-header">
      <h2>Menu</h2>
      <button class="menu-close" id="menu-close" aria-label="Fechar menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <ul class="menu-list">
      <li class="menu-item" data-action="toggle-theme" tabindex="0" role="button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
        <span>Mudar tema</span>
      </li>
      <li class="menu-item" data-action="whatsapp" tabindex="0" role="button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
        </svg>
        <span>Pedir pelo WhatsApp</span>
      </li>
      <li class="menu-item" data-action="filters" tabindex="0" role="button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
        </svg>
        <span>Filtros de produtos</span>
      </li>
      <li class="menu-item" data-action="check-order" tabindex="0" role="button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        <span>Checar pedido</span>
      </li>
    </ul>
  </nav>
  
  <!-- ============================================
       MAIN CONTENT
       ============================================ -->
  <main id="main-content">
    
    <!-- Carousel -->
    <section id="carousel" role="region" aria-roledescription="carrossel" aria-label="Ofertas e novidades">
      <div class="carousel-inner" id="carousel-inner">
        <!-- Slides will be dynamically loaded -->
      </div>
      
      <div class="carousel-controls">
        <button class="carousel-btn" id="carousel-prev" aria-label="Slide anterior">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <button class="carousel-btn" id="carousel-next" aria-label="Próximo slide">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </div>
      
      <div class="carousel-indicators" id="carousel-indicators" role="tablist">
        <!-- Indicators will be dynamically generated -->
      </div>
    </section>
    
    <!-- Payment Methods -->
    <section class="payment-methods">
      <h2 class="section-title">Métodos de Pagamento</h2>
      <div class="payment-cards">
        <article class="payment-card">
          <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
            <line x1="1" y1="10" x2="23" y2="10"></line>
          </svg>
          <h3>Pix</h3>
          <p>Pagamento instantâneo e seguro. Receba seu pedido mais rápido!</p>
        </article>
        
        <article class="payment-card">
          <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <line x1="12" y1="1" x2="12" y2="23"></line>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
          <h3>Dinheiro</h3>
          <p>Pague na entrega com dinheiro em espécie. Sem taxas adicionais.</p>
        </article>
        
        <article class="payment-card">
          <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
            <line x1="1" y1="10" x2="23" y2="10"></line>
          </svg>
          <h3>Cartão de crédito*</h3>
          <p>Parcele em até 12x no cartão de crédito.</p>
          <small>*Há taxas em todas as parcelas — o cálculo final será exibido no fechamento do pedido</small>
        </article>
      </div>
    </section>
    
    <!-- Products Section -->
    <section class="products-section">
      <h2 class="section-title">Nossos Produtos</h2>
      
      <div class="products-header">
        <div class="products-search">
          <input type="search" id="products-search" placeholder="Buscar por nome, descrição ou linha..." aria-label="Buscar produtos">
        </div>
        
        <div class="products-sort">
          <label for="sort-select">Ordenar:</label>
          <select id="sort-select" aria-label="Ordenar produtos">
            <option value="popular">Mais populares</option>
            <option value="price-asc">Menor preço</option>
            <option value="price-desc">Maior preço</option>
            <option value="newest">Últimos adicionados</option>
          </select>
        </div>
        
        <button class="filters-toggle-btn" id="filters-toggle-mobile" aria-label="Mostrar/ocultar filtros">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
          </svg>
          Filtros
        </button>
      </div>
      
      <div class="products-container">
        <!-- Filters Panel -->
        <aside id="filters-panel" class="mobile-hidden" aria-label="Filtros de produtos">
          <div class="filter-group">
            <h3>Faixa de Preço</h3>
            <div class="price-range-inputs">
              <input type="number" id="price-min" placeholder="Mín" min="0" step="0.01" aria-label="Preço mínimo">
              <span>-</span>
              <input type="number" id="price-max" placeholder="Máx" min="0" step="0.01" aria-label="Preço máximo">
            </div>
          </div>
          
          <div class="filter-group">
            <h3>Disponibilidade</h3>
            <label>
              <input type="checkbox" id="filter-common" value="common">
              Produtos mais comuns
            </label>
          </div>
          
          <div class="filter-group">
            <h3>Linha</h3>
            <select id="filter-line" aria-label="Filtrar por linha">
              <option value="">Todas as linhas</option>
              <option value="Modular">Linha Modular</option>
              <option value="Tropical">Linha Tropical</option>
              <option value="Premium">Linha Premium</option>
              <option value="Essencial">Linha Essencial</option>
            </select>
          </div>
          
          <div class="filter-group">
            <h3>Capacidade (Litros)</h3>
            <select id="filter-liters" aria-label="Filtrar por capacidade">
              <option value="">Todas as capacidades</option>
              <option value="0.5">0.5L</option>
              <option value="1">1L</option>
              <option value="1.5">1.5L</option>
              <option value="2">2L</option>
              <option value="3">3L</option>
              <option value="5">5L</option>
            </select>
          </div>
          
          <div class="filter-actions">
            <button class="btn-apply-filters" onclick="applyFilters()">Aplicar</button>
            <button class="btn-clear-filters" onclick="clearFilters()">Limpar</button>
          </div>
        </aside>
        
        <!-- Products Grid -->
        <div id="products-grid" role="list">
          <!-- Products will be dynamically loaded -->
        </div>
      </div>
    </section>
    
  </main>
  
  <!-- ============================================
       FOOTER
       ============================================ -->
  <footer role="contentinfo">
    <div class="footer-content">
      <div class="footer-logo">Sublime</div>
      
      <div class="footer-social">
        <a href="https://wa.me/5500000000000" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
          </svg>
        </a>
        
        <a href="mailto:contato@sublime.com" target="_blank" rel="noopener noreferrer" aria-label="E-mail">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
        </a>
        
        <a href="https://instagram.com/sublime" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
          </svg>
        </a>
      </div>
      
      <p class="footer-text">Gabriel Oliveira © Todos os direitos reservados</p>
    </div>
  </footer>
  
  <!-- ============================================
       MODALS
       ============================================ -->
  

  
  <!-- Cart Offcanvas -->
  <div id="cart-offcanvas" role="dialog" aria-labelledby="cart-title" aria-modal="true">
    <div class="cart-header">
      <h2 id="cart-title">Carrinho</h2>
      <button class="modal-close" onclick="closeCart()" aria-label="Fechar carrinho">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="cart-body" id="cart-items-container">
      <!-- Cart items will be dynamically rendered -->
    </div>
    <div class="cart-footer" id="cart-footer">
      <!-- Cart summary and actions will be dynamically rendered -->
    </div>
  </div>
  
  <script>
    /* ============================================
       CONFIGURATION & CONSTANTS
       ============================================ */
    
    const CONFIG = {
      ORIGIN_CEP: '63504-460',
      ORIGIN_ADDRESS: 'Rua Itacy Rodovalho de Alencar nº 110',
      WHATSAPP_NUMBER: '5588000000000', // PLACEHOLDER: substituir com número real
      CAROUSEL_AUTOPLAY_INTERVAL: 5000,
      COMMON_STOCK_THRESHOLD: 5, // Products with stock > 5 are considered "common"
      
      // PLACEHOLDER: Taxas de parcelamento configuráveis
      INSTALLMENT_FEES: {
        1: 0,
        2: 0.02,
        3: 0.03,
        4: 0.04,
        5: 0.05,
        6: 0.06,
        7: 0.07,
        8: 0.08,
        9: 0.09,
        10: 0.10,
        11: 0.11,
        12: 0.12
      }
    };
    
    /* ============================================
       STATE MANAGEMENT
       ============================================ */
    
    let appState = {
      cart: [],
      products: [],
      filteredProducts: [],
      currentCarouselIndex: 0,
      carouselInterval: null,
      appliedFrete: 0,
      appliedDiscount: 0,
      checkoutStep: 1,
      selectedPayment: null,
      selectedInstallments: 1
    };
    
    /* ============================================
       PLACEHOLDER DATA & MOCK FUNCTIONS
       ============================================ */
    
    /**
     * PLACEHOLDER: Esta função retorna imagens do carrossel em base64.
     * Substituir por função que carrega imagens de um servidor/API.
     */
    function loadCarouselImages() {
      return [
        {
          src: 'data:image/svg+xml,%3Csvg width="1400" height="400" xmlns="http://www.w3.org/2000/svg"%3E%3Cdefs%3E%3ClinearGradient id="g1" x1="0%25" y1="0%25" x2="100%25" y2="100%25"%3E%3Cstop offset="0%25" style="stop-color:%23ff6fb5;stop-opacity:1" /%3E%3Cstop offset="100%25" style="stop-color:%23c7aefc;stop-opacity:1" /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width="1400" height="400" fill="url(%23g1)"/%3E%3C/svg%3E',
          caption: 'Bem-vindo à Sublime! Fique à vontade para navegar e consulte nossas ofertas.'
        },
        {
          src: 'data:image/svg+xml,%3Csvg width="1400" height="400" xmlns="http://www.w3.org/2000/svg"%3E%3Cdefs%3E%3ClinearGradient id="g2" x1="0%25" y1="0%25" x2="100%25" y2="100%25"%3E%3Cstop offset="0%25" style="stop-color:%23c7aefc;stop-opacity:1" /%3E%3Cstop offset="100%25" style="stop-color:%23ff6fb5;stop-opacity:1" /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width="1400" height="400" fill="url(%23g2)"/%3E%3C/svg%3E',
          caption: 'Entrega mais rápida da região! Consulte o frete para sua localidade.'
        },
        {
          src: 'data:image/svg+xml,%3Csvg width="1400" height="400" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="1400" height="400" fill="%23ff6fb5"/%3E%3C/svg%3E',
          caption: 'Produtos que te acompanham no dia a dia. Praticidade e estilo para sua casa.'
        }
      ];
    }
    
    /**
     * PLACEHOLDER: Esta função retorna um array de produtos mock.
     * Substituir por função que carrega produtos de um servidor/API.
     */
    function loadProducts() {
      const productImage = 'data:image/svg+xml,%3Csvg width="200" height="200" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="200" height="200" fill="%23f6f3f8"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23c7aefc" font-size="20" font-family="Arial"%3EProduto%3C/text%3E%3C/svg%3E';
      
      return [
        { id: 1, name: 'Pote Modular 2L', price: 34.90, stock: 1, line: 'Modular', liters: 2, image: productImage, description: 'Pote hermético ideal para armazenamento.' },
        { id: 2, name: 'Jarra Tropical 1.5L', price: 28.50, stock: 8, line: 'Tropical', liters: 1.5, image: productImage, description: 'Jarra com tampa e bico direcionador.' },
        { id: 3, name: 'Tigela Premium 3L', price: 45.00, stock: 5, line: 'Premium', liters: 3, image: productImage, description: 'Tigela grande para saladas e frutas.' },
        { id: 4, name: 'Pote Essencial 1L', price: 19.90, stock: 12, line: 'Essencial', liters: 1, image: productImage, description: 'Pote básico e funcional.' },
        { id: 5, name: 'Garrafa Modular 0.5L', price: 15.90, stock: 20, line: 'Modular', liters: 0.5, image: productImage, description: 'Garrafa compacta para líquidos.' },
        { id: 6, name: 'Pote Tropical 2L', price: 32.00, stock: 3, line: 'Tropical', liters: 2, image: productImage, description: 'Design tropical e colorido.' },
        { id: 7, name: 'Kit Premium 5L', price: 89.90, stock: 2, line: 'Premium', liters: 5, image: productImage, description: 'Kit completo para organização.' },
        { id: 8, name: 'Pote Essencial 1.5L', price: 24.50, stock: 15, line: 'Essencial', liters: 1.5, image: productImage, description: 'Versátil e resistente.' },
        { id: 9, name: 'Jarra Modular 2L', price: 38.90, stock: 6, line: 'Modular', liters: 2, image: productImage, description: 'Jarra moderna e prática.' },
        { id: 10, name: 'Tigela Tropical 1L', price: 22.90, stock: 10, line: 'Tropical', liters: 1, image: productImage, description: 'Tigela pequena para snacks.' },
        { id: 11, name: 'Pote Premium 2L', price: 42.50, stock: 4, line: 'Premium', liters: 2, image: productImage, description: 'Qualidade superior.' },
        { id: 12, name: 'Garrafa Essencial 1L', price: 18.90, stock: 18, line: 'Essencial', liters: 1, image: productImage, description: 'Garrafa para o dia a dia.' }
      ];
    }
    
    /**
     * PLACEHOLDER: Esta função verifica se há ofertas ativas.
     * Substituir por integração com sistema de ofertas real.
     * @returns {Object|null} - Objeto com informações da oferta ou null
     */
    function checkOffersOnLoad() {
      // PLACEHOLDER: Simula que não há ofertas ativas no momento
      // Para ativar ofertas mock, descomentar a linha abaixo:
      // return { active: true, discount: 0.10 }; // 10% de desconto
      
      return { active: false };
    }
    
    /**
     * PLACEHOLDER: Calcula distância entre dois CEPs.
     * Esta é uma implementação mock que simula o comportamento.
     * Substituir por integração com API de geocoding real (ex: Google Maps, ViaCEP + cálculo).
     */
    function calculateDistanceFromCep(cep) {
      // Remove caracteres não numéricos
      const cleanCep = cep.replace(/\D/g, '');
      const originPrefix = CONFIG.ORIGIN_CEP.substring(0, 5).replace(/\D/g, '');
      const destPrefix = cleanCep.substring(0, 5);
      
      // Mock: Se os 5 primeiros dígitos forem iguais, considera mesma região
      if (destPrefix === originPrefix) {
        // Simula distância aleatória entre 0 e 9 km
        return Math.random() * 9;
      }
      
      // CEP de outra cidade/região
      return null;
    }
    
    /**
     * PLACEHOLDER: Valida cupom de desconto.
     * Substituir por integração com sistema de cupons real.
     */
    function validateCoupon(code) {
      // Mock: cupons fixos para demonstração
      const coupons = {
        'SUBLIME10': { type: 'percent', value: 0.10 },
        'BEMVINDO': { type: 'percent', value: 0.05 },
        'FRETE5': { type: 'fixed', value: 5.00 }
      };
      
      return coupons[code.toUpperCase()] || null;
    }
    
    /**
     * PLACEHOLDER: Submete reserva do pedido.
     * Substituir por integração com backend real.
     */
    async function submitReservation(payload) {
      // Simula delay de rede
      await new Promise(resolve => setTimeout(resolve, 2000));
      
      // Mock: Simula diferentes cenários
      const random = Math.random();
      
      if (random > 0.9) {
        // 10% de chance de produto indisponível
        return {
          success: false,
          reason: 'out_of_stock',
          itemsUnavailable: [payload.items[0].id]
        };
      } else if (random > 0.95) {
        // 5% de chance de erro genérico
        throw new Error('Erro de comunicação com servidor');
      } else {
        // 85% de chance de sucesso
        return {
          success: true,
          orderId: 'ORD-' + Date.now(),
          message: 'Pedido reservado com sucesso!'
        };
      }
    }
    
    /**
     * PLACEHOLDER: Verifica status de um pedido.
     * Substituir por integração com backend real.
     */
    async function checkOrderStatusApi(orderId) {
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      // Mock response
      return {
        found: true,
        status: 'Em preparação',
        items: 3,
        total: 125.50,
        estimatedDelivery: '2 dias úteis'
      };
    }
    
    /* ============================================
       INITIALIZATION
       ============================================ */
    
    async function initApp() {
      // Check offers
      const offers = checkOffersOnLoad();
      if (offers.active && offers.discount) {
        applyGlobalDiscount(offers.discount);
      }
      
      // Load data
      const carouselData = loadCarouselImages();
      appState.products = loadProducts();
      appState.filteredProducts = [...appState.products];
      
      // Initialize components
      initCarousel(carouselData);
      renderProducts();
      loadCartFromStorage();
      updateCartUI();
      
      // Setup event listeners
      setupEventListeners();
      
      // Hide loading screen
      setTimeout(() => {
        document.getElementById('loading-screen').classList.add('hidden');
      }, 1000);
    }
    
    function setupEventListeners() {
      // Menu toggle
      document.getElementById('menu-toggle').addEventListener('click', toggleMenu);
      document.getElementById('menu-close').addEventListener('click', toggleMenu);
      document.getElementById('menu-overlay').addEventListener('click', toggleMenu);
      
      // Menu items
      document.querySelectorAll('.menu-item').forEach(item => {
        item.addEventListener('click', handleMenuAction);
        item.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            handleMenuAction.call(item, e);
          }
        });
      });
      
      // Cart toggle
      document.getElementById('cart-toggle').addEventListener('click', openCart);
      
      // Search
      document.getElementById('products-search').addEventListener('input', debounce(filterProducts, 300));
      document.getElementById('sort-select').addEventListener('change', sortProducts);
      
      // Filters toggle (mobile)
      document.getElementById('filters-toggle-mobile').addEventListener('click', toggleFilters);
      
      // ESC key to close modals
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeAllModals();
        }
      });
      
      // Logo click
      document.getElementById('logo').addEventListener('click', (e) => {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }
    
    function applyGlobalDiscount(discount) {
      appState.products = appState.products.map(product => ({
        ...product,
        originalPrice: product.price,
        price: product.price * (1 - discount)
      }));
    }
    
    /* ============================================
       CAROUSEL
       ============================================ */
    
    function initCarousel(slides) {
      const inner = document.getElementById('carousel-inner');
      const indicators = document.getElementById('carousel-indicators');
      
      slides.forEach((slide, index) => {
        // Create slide
        const slideEl = document.createElement('div');
        slideEl.className = 'carousel-slide';
        slideEl.innerHTML = `
          <img src="${slide.src}" alt="Slide ${index + 1}">
          <div class="carousel-caption">${slide.caption}</div>
        `;
        inner.appendChild(slideEl);
        
        // Create indicator
        const indicator = document.createElement('button');
        indicator.className = `carousel-indicator ${index === 0 ? 'active' : ''}`;
        indicator.setAttribute('aria-label', `Ir para slide ${index + 1}`);
        indicator.setAttribute('role', 'tab');
        indicator.addEventListener('click', () => goToSlide(index));
        indicators.appendChild(indicator);
      });
      
      // Controls
      document.getElementById('carousel-prev').addEventListener('click', prevSlide);
      document.getElementById('carousel-next').addEventListener('click', nextSlide);
      
      // Autoplay
      startCarouselAutoplay();
      
      // Pause on hover
      const carousel = document.getElementById('carousel');
      carousel.addEventListener('mouseenter', stopCarouselAutoplay);
      carousel.addEventListener('mouseleave', startCarouselAutoplay);
      
      // Touch support
      let touchStartX = 0;
      let touchEndX = 0;
      
      carousel.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
      });
      
      carousel.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
      });
      
      function handleSwipe() {
        if (touchStartX - touchEndX > 50) nextSlide();
        if (touchEndX - touchStartX > 50) prevSlide();
      }
    }
    
    function goToSlide(index) {
      const inner = document.getElementById('carousel-inner');
      const indicators = document.querySelectorAll('.carousel-indicator');
      
      appState.currentCarouselIndex = index;
      inner.style.transform = `translateX(-${index * 100}%)`;
      
      indicators.forEach((ind, i) => {
        ind.classList.toggle('active', i === index);
      });
    }
    
    function nextSlide() {
      const slides = document.querySelectorAll('.carousel-slide');
      const nextIndex = (appState.currentCarouselIndex + 1) % slides.length;
      goToSlide(nextIndex);
    }
    
    function prevSlide() {
      const slides = document.querySelectorAll('.carousel-slide');
      const prevIndex = (appState.currentCarouselIndex - 1 + slides.length) % slides.length;
      goToSlide(prevIndex);
    }
    
    function startCarouselAutoplay() {
      stopCarouselAutoplay();
      appState.carouselInterval = setInterval(nextSlide, CONFIG.CAROUSEL_AUTOPLAY_INTERVAL);
    }
    
    function stopCarouselAutoplay() {
      if (appState.carouselInterval) {
        clearInterval(appState.carouselInterval);
        appState.carouselInterval = null;
      }
    }
    
    /* ============================================
       PRODUCTS
       ============================================ */
    
    function renderProducts() {
      const grid = document.getElementById('products-grid');
      grid.innerHTML = '';
      
      if (appState.filteredProducts.length === 0) {
        grid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; padding: 3rem; color: var(--text-secondary);">Nenhum produto encontrado.</p>';
        return;
      }
      
      appState.filteredProducts.forEach(product => {
        const card = createProductCard(product);
        grid.appendChild(card);
      });
    }
    
    function createProductCard(product) {
      const article = document.createElement('article');
      article.className = 'product-card';
      article.setAttribute('data-id', product.id);
      article.setAttribute('data-price', product.price);
      article.setAttribute('data-stock', product.stock);
      article.setAttribute('data-line', product.line);
      article.setAttribute('data-liters', product.liters);
      article.setAttribute('role', 'listitem');
      
      const hasPromo = product.originalPrice && product.originalPrice > product.price;
      const isLastUnit = product.stock === 1;
      
      article.innerHTML = `
        <img src="${product.image}" alt="${product.name}" class="product-img">
        <div class="product-content">
          <h3 class="product-title">${product.name}</h3>
          <p class="product-line">${product.line} - ${product.liters}L</p>
          <p class="product-desc">${product.description}</p>
          <p class="product-stock ${isLastUnit ? 'last-unit' : ''}">
            ${isLastUnit ? '⚠️ Último disponível! Garanta já!' : `${product.stock} em estoque`}
          </p>
          <div class="price">
            ${hasPromo ? `<span class="price-original">De: R$ ${product.originalPrice.toFixed(2)}</span>` : ''}
            <span class="price-current">R$ ${product.price.toFixed(2)}</span>
          </div>
          <button class="add-to-cart" onclick="addToCart(${product.id})" aria-label="Adicionar ${product.name} ao carrinho">
            Adicionar ao carrinho
          </button>
        </div>
      `;
      
      return article;
    }
    
    function filterProducts() {
      const searchTerm = document.getElementById('products-search').value.toLowerCase();
      
      appState.filteredProducts = appState.products.filter(product => {
        return product.name.toLowerCase().includes(searchTerm) ||
               product.description.toLowerCase().includes(searchTerm) ||
               product.line.toLowerCase().includes(searchTerm);
      });
      
      renderProducts();
    }
    
    function sortProducts() {
      const sortBy = document.getElementById('sort-select').value;
      
      switch (sortBy) {
        case 'price-asc':
          appState.filteredProducts.sort((a, b) => a.price - b.price);
          break;
        case 'price-desc':
          appState.filteredProducts.sort((a, b) => b.price - a.price);
          break;
        case 'newest':
          appState.filteredProducts.sort((a, b) => b.id - a.id);
          break;
        case 'popular':
        default:
          appState.filteredProducts.sort((a, b) => b.stock - a.stock);
          break;
      }
      
      renderProducts();
    }
    
    function applyFilters() {
      const priceMin = parseFloat(document.getElementById('price-min').value) || 0;
      const priceMax = parseFloat(document.getElementById('price-max').value) || Infinity;
      const commonOnly = document.getElementById('filter-common').checked;
      const selectedLine = document.getElementById('filter-line').value;
      const selectedLiters = document.getElementById('filter-liters').value;
      
      appState.filteredProducts = appState.products.filter(product => {
        const priceOk = product.price >= priceMin && product.price <= priceMax;
        const commonOk = !commonOnly || product.stock > CONFIG.COMMON_STOCK_THRESHOLD;
        const lineOk = !selectedLine || product.line === selectedLine;
        const litersOk = !selectedLiters || product.liters.toString() === selectedLiters;
        
        return priceOk && commonOk && lineOk && litersOk;
      });
      
      renderProducts();
      
      // Close filters on mobile
      if (window.innerWidth < 768) {
        toggleFilters();
      }
    }
    
    function clearFilters() {
      document.getElementById('price-min').value = '';
      document.getElementById('price-max').value = '';
      document.getElementById('filter-common').checked = false;
      document.getElementById('filter-line').value = '';
      document.getElementById('filter-liters').value = '';
      
      appState.filteredProducts = [...appState.products];
      renderProducts();
    }
    
    function toggleFilters() {
      const panel = document.getElementById('filters-panel');
      panel.classList.toggle('mobile-hidden');
    }
    
    /* ============================================
       CART
       ============================================ */
    
    function addToCart(productId, qty = 1) {
      const product = appState.products.find(p => p.id === productId);
      if (!product) return;
      
      const existingItem = appState.cart.find(item => item.id === productId);
      
      if (existingItem) {
        existingItem.quantity += qty;
      } else {
        appState.cart.push({
          id: product.id,
          name: product.name,
          price: product.price,
          image: product.image,
          quantity: qty,
          stock: product.stock
        });
      }
      
      saveCartToStorage();
      updateCartUI();
      
      // Show feedback
      showToast(`${product.name} adicionado ao carrinho!`);
    }
    
    function updateCartItem(productId, qty) {
      const item = appState.cart.find(i => i.id === productId);
      if (!item) return;
      
      if (qty <= 0) {
        removeFromCart(productId);
      } else {
        item.quantity = Math.min(qty, item.stock);
        saveCartToStorage();
        updateCartUI();
      }
    }
    
    function removeFromCart(productId) {
      appState.cart = appState.cart.filter(item => item.id !== productId);
      saveCartToStorage();
      updateCartUI();
    }
    
    function clearCart() {
      appState.cart = [];
      appState.appliedFrete = 0;
      appState.appliedDiscount = 0;
      saveCartToStorage();
      updateCartUI();
    }
    
    function getCart() {
      return appState.cart;
    }
    
    function saveCartToStorage() {
      localStorage.setItem('sublime_cart', JSON.stringify(appState.cart));
    }
    
    function loadCartFromStorage() {
      const stored = localStorage.getItem('sublime_cart');
      if (stored) {
        appState.cart = JSON.parse(stored);
      }
    }
    
    function updateCartUI() {
      const badge = document.getElementById('cart-count');
      const totalItems = appState.cart.reduce((sum, item) => sum + item.quantity, 0);
      
      if (totalItems > 0) {
        badge.textContent = totalItems;
        badge.classList.remove('hidden');
      } else {
        badge.classList.add('hidden');
      }
      
      renderCartItems();
    }
    
    function renderCartItems() {
      const container = document.getElementById('cart-items-container');
      const footer = document.getElementById('cart-footer');
      
      if (appState.cart.length === 0) {
        container.innerHTML = `
          <div class="cart-empty">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <p>Seu carrinho está vazio</p>
          </div>
        `;
        footer.innerHTML = '';
        return;
      }
      
      container.innerHTML = appState.cart.map(item => `
        <div class="cart-item">
          <img src="${item.image}" alt="${item.name}" class="cart-item-img">
          <div class="cart-item-details">
            <div class="cart-item-title">${item.name}</div>
            <div class="cart-item-price">R$ ${item.price.toFixed(2)}</div>
            <div class="cart-item-controls">
              <button class="qty-btn" onclick="updateCartItem(${item.id}, ${item.quantity - 1})" aria-label="Diminuir quantidade">-</button>
              <span class="cart-item-qty">${item.quantity}</span>
              <button class="qty-btn" onclick="updateCartItem(${item.id}, ${item.quantity + 1})" aria-label="Aumentar quantidade">+</button>
            </div>
          </div>
          <button class="cart-item-remove" onclick="removeFromCart(${item.id})" aria-label="Remover item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="3 6 5 6 21 6"></polyline>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
          </button>
        </div>
      `).join('');
      
      const subtotal = appState.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      
      footer.innerHTML = `
        <div class="cart-summary">
          <div class="cart-summary-row total">
            <span>Subtotal:</span>
            <span>R$ ${subtotal.toFixed(2)}</span>
          </div>
          <p style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.5rem; text-align: center;">
            O frete será calculado na próxima etapa
          </p>
        </div>
        <div class="cart-actions">
          <button class="btn-checkout" onclick="openCheckout()">Finalizar compra</button>
        </div>
      `;
    }
    
    function openCart() {
      // Close menu if open to prevent conflicts
      const menu = document.getElementById('side-menu');
      if (menu.classList.contains('open')) {
        closeMenu();
      }
      
      document.getElementById('cart-offcanvas').classList.add('open');
      document.getElementById('menu-overlay').classList.add('visible');
      document.getElementById('cart-toggle').setAttribute('aria-expanded', 'true');
    }
    
    function closeCart() {
      document.getElementById('cart-offcanvas').classList.remove('open');
      document.getElementById('menu-overlay').classList.remove('visible');
      document.getElementById('cart-toggle').setAttribute('aria-expanded', 'false');
    }
    

    
    /* ============================================
       CHECKOUT
       ============================================ */
    
    function openCheckout() {
      if (appState.cart.length === 0) {
        showToast('Adicione produtos ao carrinho primeiro!');
        return;
      }
      
      // Save cart data to localStorage for the checkout page
      localStorage.setItem('sublime_checkout_data', JSON.stringify({
        cart: appState.cart,
        frete: appState.appliedFrete,
        discount: appState.appliedDiscount,
        timestamp: Date.now()
      }));
      
      // Navigate to checkout page
      window.location.href = 'finalizarpagamento.html';
    }
    

    
    function renderPaymentSelection(container) {
      container.innerHTML = `
        <div class="checkout-step active">
          <h3>Selecione a forma de pagamento</h3>
          
          <div class="payment-options">
            <label class="payment-option" data-payment="pix">
              <input type="radio" name="payment" value="pix" onchange="selectPayment('pix')">
              <div class="payment-option-icon">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                  <line x1="1" y1="10" x2="23" y2="10"></line>
                </svg>
              </div>
              <div class="payment-option-content">
                <h4>Pix</h4>
                <p>Pagamento instantâneo</p>
              </div>
            </label>
            
            <label class="payment-option" data-payment="dinheiro">
              <input type="radio" name="payment" value="dinheiro" onchange="selectPayment('dinheiro')">
              <div class="payment-option-icon">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="12" y1="1" x2="12" y2="23"></line>
                  <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                </svg>
              </div>
              <div class="payment-option-content">
                <h4>Dinheiro</h4>
                <p>Pagamento na entrega</p>
              </div>
            </label>
            
            <label class="payment-option" data-payment="credito">
              <input type="radio" name="payment" value="credito" onchange="selectPayment('credito')">
              <div class="payment-option-icon">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                  <line x1="1" y1="10" x2="23" y2="10"></line>
                </svg>
              </div>
              <div class="payment-option-content">
                <h4>Cartão de Crédito</h4>
                <p>Parcele em até 12x</p>
              </div>
            </label>
          </div>
          
          <div id="installments-container" class="installments-select">
            <div class="form-group">
              <label for="installments">Número de parcelas:</label>
              <select id="installments" onchange="updateInstallments()">
                ${Object.keys(CONFIG.INSTALLMENT_FEES).map(n => {
                  const fee = CONFIG.INSTALLMENT_FEES[n];
                  const subtotal = appState.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                  const total = subtotal + appState.appliedFrete - appState.appliedDiscount;
                  const withFee = total * (1 + fee);
                  const perMonth = withFee / n;
                  return `<option value="${n}">${n}x de R$ ${perMonth.toFixed(2)} ${fee > 0 ? `(+${(fee * 100).toFixed(0)}%)` : ''}</option>`;
                }).join('')}
              </select>
            </div>
          </div>
          
          <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeCheckoutModal()">Cancelar</button>
            <button class="btn btn-primary" onclick="nextCheckoutStep()" id="btn-next-step" disabled>Continuar</button>
          </div>
        </div>
      `;
    }
    
    function selectPayment(type) {
      appState.selectedPayment = type;
      
      // Update UI
      document.querySelectorAll('.payment-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      document.querySelector(`.payment-option[data-payment="${type}"]`).classList.add('selected');
      
      // Show/hide installments
      const installmentsContainer = document.getElementById('installments-container');
      if (type === 'credito') {
        installmentsContainer.classList.add('visible');
      } else {
        installmentsContainer.classList.remove('visible');
        appState.selectedInstallments = 1;
      }
      
      // Enable next button
      document.getElementById('btn-next-step').disabled = false;
    }
    
    function updateInstallments() {
      appState.selectedInstallments = parseInt(document.getElementById('installments').value);
    }
    
    function nextCheckoutStep() {
      appState.checkoutStep++;
      renderCheckoutStep();
    }
    
    function renderOrderReview(container) {
      const subtotal = appState.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      let total = subtotal + appState.appliedFrete - appState.appliedDiscount;
      
      // Apply installment fee if credit card
      if (appState.selectedPayment === 'credito') {
        const fee = CONFIG.INSTALLMENT_FEES[appState.selectedInstallments] || 0;
        total = total * (1 + fee);
      }
      
      container.innerHTML = `
        <div class="checkout-step active">
          <h3>Resumo do Pedido</h3>
          
          <div class="order-summary">
            <h4>Produtos:</h4>
            ${appState.cart.map(item => `
              <div class="order-item">
                <span>${item.name} (x${item.quantity})</span>
                <span>R$ ${(item.price * item.quantity).toFixed(2)}</span>
              </div>
            `).join('')}
            
            <div class="order-item" style="margin-top: 1rem;">
              <span>Subtotal:</span>
              <span>R$ ${subtotal.toFixed(2)}</span>
            </div>
            
            ${appState.appliedFrete > 0 ? `
              <div class="order-item">
                <span>Frete:</span>
                <span>R$ ${appState.appliedFrete.toFixed(2)}</span>
              </div>
            ` : ''}
            
            ${appState.appliedDiscount > 0 ? `
              <div class="order-item">
                <span>Desconto:</span>
                <span>- R$ ${appState.appliedDiscount.toFixed(2)}</span>
              </div>
            ` : ''}
            
            ${appState.selectedPayment === 'credito' && appState.selectedInstallments > 1 ? `
              <div class="order-item">
                <span>Taxa de parcelamento:</span>
                <span>+ ${(CONFIG.INSTALLMENT_FEES[appState.selectedInstallments] * 100).toFixed(0)}%</span>
              </div>
            ` : ''}
            
            <div class="order-total">
              <span>Total:</span>
              <span>R$ ${total.toFixed(2)}</span>
            </div>
            
            ${appState.selectedPayment === 'credito' && appState.selectedInstallments > 1 ? `
              <p style="text-align: center; margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem;">
                ${appState.selectedInstallments}x de R$ ${(total / appState.selectedInstallments).toFixed(2)}
              </p>
            ` : ''}
          </div>
          
          <div class="form-group">
            <label for="coupon-input">Cupom de desconto (opcional):</label>
            <div class="coupon-input-group">
              <input type="text" id="coupon-input" placeholder="Digite o código">
              <button class="btn btn-secondary" onclick="applyCoupon()">Aplicar</button>
            </div>
            <div id="coupon-message"></div>
          </div>
          
          <div class="modal-footer">
            <button class="btn btn-secondary" onclick="appState.checkoutStep = 1; renderCheckoutStep()">Voltar</button>
            <button class="btn btn-primary" onclick="processReservation()">Reservar Pedido</button>
          </div>
        </div>
      `;
    }
    
    function applyCoupon() {
      const code = document.getElementById('coupon-input').value.trim();
      const messageEl = document.getElementById('coupon-message');
      
      if (!code) {
        messageEl.innerHTML = '<p style="color: var(--accent); margin-top: 0.5rem;">Digite um código de cupom.</p>';
        return;
      }
      
      const coupon = validateCoupon(code);
      
      if (coupon) {
        const subtotal = appState.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        
        if (coupon.type === 'percent') {
          appState.appliedDiscount = subtotal * coupon.value;
        } else if (coupon.type === 'fixed') {
          appState.appliedDiscount = coupon.value;
        }
        
        messageEl.innerHTML = '<p style="color: #4caf50; margin-top: 0.5rem;">✓ Cupom aplicado com sucesso!</p>';
        
        // Re-render to update total
        setTimeout(() => renderOrderReview(document.getElementById('checkout-body')), 1000);
      } else {
        messageEl.innerHTML = '<p style="color: #f44336; margin-top: 0.5rem;">✗ Cupom inválido.</p>';
      }
    }
    
    async function processReservation() {
      appState.checkoutStep = 3;
      renderOrderStatus(document.getElementById('checkout-body'), 'loading');
      
      const subtotal = appState.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      let total = subtotal + appState.appliedFrete - appState.appliedDiscount;
      
      if (appState.selectedPayment === 'credito') {
        const fee = CONFIG.INSTALLMENT_FEES[appState.selectedInstallments] || 0;
        total = total * (1 + fee);
      }
      
      const payload = {
        items: appState.cart,
        payment: appState.selectedPayment,
        installments: appState.selectedInstallments,
        frete: appState.appliedFrete,
        discount: appState.appliedDiscount,
        total: total
      };
      
      try {
        // PLACEHOLDER: Chamar função mock de reserva
        const result = await submitReservation(payload);
        
        if (result.success) {
          renderOrderStatus(document.getElementById('checkout-body'), 'success', result);
          clearCart();
        } else {
          renderOrderStatus(document.getElementById('checkout-body'), 'error', result);
        }
      } catch (error) {
        renderOrderStatus(document.getElementById('checkout-body'), 'error', { reason: 'network', message: error.message });
      }
    }
    
    function renderOrderStatus(container, status, data = {}) {
      if (status === 'loading') {
        container.innerHTML = `
          <div class="checkout-step active">
            <div class="status-message loading">
              <div class="spinner"></div>
              <div>
                <p><strong>Reservando seus produtos...</strong></p>
                <p style="margin-top: 0.5rem; color: var(--text-secondary);">Esperando resposta do servidor</p>
              </div>
            </div>
          </div>
        `;
      } else if (status === 'success') {
        container.innerHTML = `
          <div class="checkout-step active">
            <div class="status-message success">
              <h3 style="color: #4caf50; margin-bottom: 1rem;">✓ Pedido reservado com sucesso!</h3>
              <p><strong>Número do pedido:</strong> ${data.orderId}</p>
              <p style="margin-top: 1rem;">${data.message}</p>
              <p style="margin-top: 1rem; color: var(--text-secondary);">
                Entraremos em contato em breve para confirmar a entrega.
              </p>
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary" onclick="closeCheckoutModal()">Fechar</button>
            </div>
          </div>
        `;
      } else if (status === 'error') {
        let errorMessage = 'Ocorreu um erro ao processar seu pedido.';
        
        if (data.reason === 'out_of_stock') {
          errorMessage = 'Alguns itens não estão mais disponíveis. Por favor, atualize seu carrinho.';
        } else if (data.reason === 'network') {
          errorMessage = `Erro de comunicação: ${data.message}`;
        }
        
        container.innerHTML = `
          <div class="checkout-step active">
            <div class="status-message error">
              <h3 style="color: #f44336; margin-bottom: 1rem;">✗ Erro ao reservar pedido</h3>
              <p>${errorMessage}</p>
            </div>
            <div class="modal-footer">
              <button class="btn btn-secondary" onclick="closeCheckoutModal()">Fechar</button>
              <button class="btn btn-primary" onclick="processReservation()">Tentar novamente</button>
            </div>
          </div>
        `;
      }
    }
    

    
    /* ============================================
       MENU
       ============================================ */
    
    function toggleMenu() {
      const menu = document.getElementById('side-menu');
      const overlay = document.getElementById('menu-overlay');
      const toggle = document.getElementById('menu-toggle');
      
      // Close cart if open to prevent conflicts
      const cart = document.getElementById('cart-offcanvas');
      if (cart.classList.contains('open')) {
        closeCart();
      }
      
      const isOpen = menu.classList.toggle('open');
      overlay.classList.toggle('visible');
      toggle.setAttribute('aria-expanded', isOpen);
    }
    
    function closeMenu() {
      const menu = document.getElementById('side-menu');
      const overlay = document.getElementById('menu-overlay');
      const toggle = document.getElementById('menu-toggle');
      
      menu.classList.remove('open');
      overlay.classList.remove('visible');
      toggle.setAttribute('aria-expanded', 'false');
    }
    
    function handleMenuAction(e) {
      const action = this.dataset.action;
      
      switch (action) {
        case 'toggle-theme':
          toggleTheme();
          break;
        case 'whatsapp':
          openWhatsApp();
          break;
        case 'filters':
          toggleMenu();
          toggleFilters();
          break;
        case 'check-order':
          window.location.href = 'checarpedido.html';
          break;
      }
    }
    
    function toggleTheme() {
      document.body.classList.toggle('dark-theme');
      const isDark = document.body.classList.contains('dark-theme');
      localStorage.setItem('sublime_theme', isDark ? 'dark' : 'light');
      showToast(`Tema ${isDark ? 'escuro' : 'claro'} ativado`);
    }
    
    function openWhatsApp() {
      // PLACEHOLDER: número do WhatsApp configurável
      window.open(`https://wa.me/${CONFIG.WHATSAPP_NUMBER}`, '_blank');
    }
    
    /* ============================================
       UTILITIES
       ============================================ */
    
    function closeAllModals() {
      document.querySelectorAll('.modal').forEach(modal => {
        modal.classList.remove('open');
      });
      closeCart();
      toggleMenu();
    }
    
    function showToast(message) {
      // Simple toast notification (could be enhanced with a proper toast library)
      const toast = document.createElement('div');
      toast.style.cssText = `
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: var(--card-bg);
        color: var(--text-primary);
        padding: 1rem 1.5rem;
        border-radius: 8px;
        box-shadow: 0 4px 20px var(--shadow);
        z-index: 10000;
        animation: slideIn 0.3s ease;
        border-left: 4px solid var(--accent);
      `;
      toast.textContent = message;
      toast.setAttribute('role', 'alert');
      
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }
    
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
    
    function performSearch() {
      const searchTerm = document.getElementById('header-search').value;
      document.getElementById('products-search').value = searchTerm;
      filterProducts();
      document.querySelector('.products-section').scrollIntoView({ behavior: 'smooth' });
    }
    
    /* ============================================
       LOAD SAVED PREFERENCES
       ============================================ */
    
    function loadPreferences() {
      const savedTheme = localStorage.getItem('sublime_theme');
      if (savedTheme === 'dark') {
        document.body.classList.add('dark-theme');
      }
    }
    
    /* ============================================
       ANIMATIONS
       ============================================ */
    
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      
      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(style);
    
    /* ============================================
       START APPLICATION
       ============================================ */
    
    // Check if returning from checkout with success
    function checkOrderConfirmation() {
      const confirmed = localStorage.getItem('sublime_order_confirmed');
      if (confirmed) {
        const orderData = JSON.parse(confirmed);
        localStorage.removeItem('sublime_order_confirmed');
        
        setTimeout(() => {
          showToast('✓ Pedido confirmado! Aguarde o contato do vendedor.');
        }, 1000);
      }
    }
    
    // Load preferences first
    loadPreferences();
    
    // Initialize app when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        initApp();
        checkOrderConfirmation();
      });
    } else {
      initApp();
      checkOrderConfirmation();
    }
  </script>
  
</body>
</html>
